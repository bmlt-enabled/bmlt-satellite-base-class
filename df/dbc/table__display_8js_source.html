<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BMLT Satellite Base Class: /home/runner/work/bmlt-satellite-base-class/bmlt-satellite-base-class/table_display.js Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BMLT Satellite Base Class
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/home/runner/work/bmlt-satellite-base-class/bmlt-satellite-base-class/table_display.js</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;/****************************************************************************************//**</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  \file table_display.js                                                                    *</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  \brief Javascript functions for the basic table display.                                  *</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                                                                                            *\</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    This file contains a function/object that implements the Fast Table Shortcode. Upon     *</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    instantiation, it uses the page DOM to create a tabular display of meetings that are    *</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    returned by a focused semantic search. The meetings are segregated by weekday, and only *</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    one weekday is populated at a time. Clicking on another weekday will start an AJAX      *</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    query to the server, fetching the meetings for that weekday (and only that weekday).    *</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    Search results are cached.                                                              *</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    The displayed meetings can be sorted by clicking on the column headers (with the sort   *</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    direction being changed by repeated clicks). Changing the sort flushes all cached data. *</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    This class was designed to be highly self-contained. It can be instantiated multiple    *</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    times per page, with each instance reflecting a different set of settings from the      *</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    BMLT Administration setup (Theme, Week Start, Time Format and Root Server). The basic   *</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    search parameters are passed in upon instantiation. These define the dataset to be      *</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    fetched and displayed. The dataset is retrieved through a standard JSON semantic query  *</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    to the instance&#39;s Root Server.                                                          *</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    The weekday tabs tend to be the &quot;hubs&quot; of the functionality. JSON search results are    *</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    attached to the weekday tabs, and this data is used to create the weekday search        *</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    display. The formats JSON is held by the main class, as that is used throughout the     *</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    class. Otherwise, we try to encapsulate data and functionality as much as possible.     *</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    This should only be used on Root Server version 2.7.8 or above, because the town sort   *</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    will not work properly on older versions (but this will generally work, anyway).        *</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    SOME NOTES ON CONVENTIONS:                                                              *</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    You will notice an abundance of semicolons. This is because this file is passed through *</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    an optimizer that crunches the entire file into one line. In this case, semicolons are  *</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    absolutely vital.                                                                       *</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    We use a lot of completion block functions, which is fairly standard for JavaScript.    *</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    These are for things like mouseovers and click handlers.                                *</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    We use ul elements, as opposed to table elements, in order to maximize the potential    *</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    for CSS modification of the displayed results (such as for responsive design).          *</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    This file is part of the BMLT Common Satellite Base Class Project. The project GitHub   *</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    page is available here: https://github.com/MAGSHARE/BMLT-Common-CMS-Plugin-Class        *</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    This file is part of the Basic Meeting List Toolbox (BMLT).                             *</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    Find out more at: https://bmlt.app                                              *</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    BMLT is free software: you can redistribute it and/or modify                            *</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    it under the terms of the GNU General Public License as published by                    *</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    the Free Software Foundation, either version 3 of the License, or                       *</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    (at your option) any later version.                                                     *</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    BMLT is distributed in the hope that it will be useful,                                 *</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    but WITHOUT ANY WARRANTY; without even the implied warranty of                          *</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                           *</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    GNU General Public License for more details.                                            *</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                                                                            *</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    You should have received a copy of the GNU General Public License                       *</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    along with this code.  If not, see &lt;http://www.gnu.org/licenses/&gt;.                      *</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;********************************************************************************************/</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;/****************************************************************************************//**</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    \brief  This class function implements the [[bmlt_table]] shortcode. Most of the shortcode</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            functionality is JavaScript. This function builds a new DOM tree that contains</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            a &lt;div&gt; element that will, in turn, contain a couple of lists that are warped</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            using CSS into a semblance of a table.</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    \param in_display_id The element DOM ID of the container div.</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    \param in_settings_id The ID of the settings used for this table.</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    \param in_theme_name The name of the styling theme.</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    \param in_ajax_base_uri The base URI for AJAX callbacks.</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    \param in_start_weekday The weekday that starts the week. 0 is Sunday, 6 is Saturday.</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    \param in_is_military_time True, if the time is to be displayed as military.</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    \param in_search_params The query parameters for the base search.</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;********************************************************************************************/</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;function TableSearchDisplay ( in_display_id, in_settings_id, in_theme_name, in_ajax_base_uri, in_start_weekday, in_is_military_time, in_search_params )</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    /****************************************************************************************</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    *                                   INSTANCE DATA MEMBERS                               *</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    ****************************************************************************************/</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    // These are the parameters passed in.</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    var my_settings_id;             ///\var my_settings_id This is the unique ID of the BMLT settings that we use to reference default values.</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    var my_ajax_base_uri;           ///\var my_ajax_base_uri This is the base URI for our AJAX calls.</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    var my_theme_name;              ///\var my_theme_name This is the name of our styling theme.</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    var my_search_query_params;     ///\var my_search_query_params These are the search parameters that we use to populate the search.</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    var my_start_weekday;           ///\var my_start_weekday The day of week that starts the header (0 is Sunday, 6 is Saturday).</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    var my_military_time;           ///\var my_military_time True, if the start time is military.</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    // These are DOM elements that we track.</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    var my_container_object;        ///\var my_container_object This is the div block that surrounds this table.</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    var my_header_container;        ///\var my_header_container The div element that will contain the weekday tabs.</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    var my_body_container;          ///\var my_body_container The table element that will contain the search results.</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    var my_body_container_header;   ///\var my_body_container_header The table thead element that will contain the search results.</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    var my_body_container_body;     ///\var my_body_container_body The table tbody element that will contain the search results.</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    var my_weekday_links;           ///\var my_weekday_links An array of li elements, containing the weekday tabs</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    var my_selected_tab;            ///\var my_selected_tab This will be the selected tab object.</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    var my_selected_sort_key;       ///\var my_selected_sort_key The currently selected sort key.</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    var my_sort_dir;                ///\var my_sort_dir The currently selected sort direction.</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    var my_format_data;             ///\var my_format_data This is the JSON object that contains the format data for the search. It is loaded at startup, and not changed afterwards.</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    // These are basically constants. They are the sort keys.</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    var my_sort_key_time;           ///\var my_sort_key_time The sort keys for sorting by start time.</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    var my_sort_key_meeting_name;   ///\var my_sort_key_meeting_name The sort keys for sorting by meeting name.</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    var my_sort_key_town;           ///\var my_sort_key_town The sort keys for sorting by borough/town.</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    var my_sort_key_address;        ///\var my_sort_key_address The sort keys for sorting by street address/location name.</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    this.my_sort_key_time = &#39;start_time,location_nation,location_province,location_sub_province,location_city_subsection,location_municipality,location_neighborhood,meeting_name&#39;;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    this.my_sort_key_meeting_name = &#39;meeting_name,start_time,location_city_subsection,location_municipality&#39;;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    this.my_sort_key_town = &#39;location_city_subsection,location_municipality,start_time,meeting_name&#39;;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    this.my_sort_key_address = &#39;location_text,location_street,location_city_subsection,location_municipality,start_time,meeting_name&#39;;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    /****************************************************************************************</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    *################################### MAIN FUNCTION CODE ################################*</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    ****************************************************************************************/</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    // Start off by getting our container.</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    this.my_container_object = document.getElementById ( in_display_id );</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    this.my_container_object.handlerObject = this;  // Attach a context object (this function instance).</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    // Set up the parameters passed in.</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    this.my_settings_id = in_settings_id;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    this.my_ajax_base_uri = in_ajax_base_uri;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    this.my_theme_name = in_theme_name;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    this.my_start_weekday = in_start_weekday;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    this.my_search_query_params = in_search_params;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    this.my_military_time = in_is_military_time;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    // Initial values.</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    this.my_selected_sort_key = this.my_sort_key_time;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    this.my_sort_dir = &#39;asc&#39;;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    // This makes the elements visible (This means that non-JS browsers see nothing but the &lt;noscript&gt; element).</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    this.my_container_object.style.display = &#39;block&#39;;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    // Fire off the first shot -get the formats, which will cascade to the first search.</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    this.domBuilder_CreateHeader();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;};</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;/****************************************************************************************</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;*############################### CLASS PROTOTYPE FUNCTIONS #############################*</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;/****************************************************************************************</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;*############################### COMMUNICATIONS ROUTINES ###############################*</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                      AJAX HANDLER                                      *</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    \brief A simple, generic AJAX request function.</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    \param url The URI to be called. This should include all parameters in GET form (even if this is POST).</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    \param callback The success callback</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    \param method The method (&#39;get&#39;, &#39;GET&#39;, &#39;post&#39; or &#39;POST&#39;)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    \param extra_data If supplied, extra data to be delivered to the callback.</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    \returns a new XMLHTTPRequest object.</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;TableSearchDisplay.prototype.comms_AjaxRequest = function ( url, callback, method, extra_data )</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    /********************************************************************************//**</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    *   \brief Create a generic XMLHTTPObject.</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    *   This will account for the various flavors imposed by different browsers.</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    *   \returns a new XMLHTTPRequest object.</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    ************************************************************************************/</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    function createXMLHTTPObject()</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        // Various systems will produce one or more instances of these classes.</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        var XMLHttpArray = [</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            function() {return new XMLHttpRequest()},                   // Your average browser.</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            function() {return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;)},    // These are for Microsoft browsers.</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            function() {return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;)},</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            function() {return new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)}</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            ];</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        var xmlhttp = false;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        // Go through the array until you hit a dispatcher that was properly instantiated.</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        // Once you find it, make that our dispatcher.</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        for ( var i=0; i &lt; XMLHttpArray.length; i++ )</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            try</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                xmlhttp = XMLHttpArray[i]();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            catch(e)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                continue;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                };</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            break;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            };</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        return xmlhttp;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    };</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    // Set up a dispatcher.</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    var req = createXMLHTTPObject();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    req.finalCallback = callback;   // Point to the given callback.</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    var sVars = null;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    method = method.toString().toUpperCase();   // Clean the input method to all uppercase.</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    // Split the URL up, if this is a POST.</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    if ( method == &quot;POST&quot; )</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        var rmatch = /^([^\?]*)\?(.*)$/.exec ( url );</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        url = rmatch[1];</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        sVars = rmatch[2];</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        // This horrible, horrible kludge, is because Drupal insists on having its q parameter in the GET list only.</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        var rmatch_kludge = /(q=admin\/settings\/bmlt)&amp;?(.*)/.exec ( rmatch[2] );</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        if ( rmatch_kludge &amp;&amp; rmatch_kludge[1] )</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            url += &#39;?&#39;+rmatch_kludge[1];</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            sVars = rmatch_kludge[2];</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            };</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        };</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    // If we are passing some extra data to the callback, we do so here.</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    if ( extra_data )</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        req.extra_data = extra_data;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        };</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    // Create the HTTPRequest</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    req.open ( method, url, true );</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    // In the case of POST, our data is separate from the URI.</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    if ( method == &quot;POST&quot; )</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        req.setRequestHeader ( &quot;Method&quot;, &quot;POST &quot;+url+&quot; HTTP/1.1&quot; );</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        req.setRequestHeader ( &quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot; );</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        };</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    // Set the function to be called as the request does its thing.</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    req.onreadystatechange = function ( )</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        if ( req.readyState != 4 ) return;  // We only care about the end.</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        if( req.status != 200 ) return;     // If we failed, we drop out.</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        callback ( req, req.extra_data );   // If we made it this far, we call our callback.</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        req = null;                         // Kill the request.</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        };</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    req.send ( sVars ); // Throw the switch, Igor!</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    return req;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;};</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    \brief  Called to load all the format objects for the search.</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            This will give us the &quot;used formats&quot; for the given filtered search. This will</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            request a JSON response from the server. It does not use switcher=GetFormats.</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            Instead, it requests the formats only rom switcher=GetSearchResults. This will</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            allow the number of formats to be limited to only those used for the search results.</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            This uses the filter established by the query parameters passed in on instantiation.</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            This function initiates an AJAX call that will return and call the class function</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            comms_callback_loadloadFormatData.</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;TableSearchDisplay.prototype.comms_loadFormatData = function()</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    // Since loading the formats happens, regardless of the weekday, we set all the spinners going.</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    for ( var i = 0; i &lt; 7; i++ )</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        var tab_object = this.my_weekday_links[i];</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        tab_object.className = &#39;bmlt_table_header_weekday_list_element is_loading&#39;;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        };</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    // Ask for the formats used by the search set (not every format in the database).</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    // Tell the formats to come alone, bearing small, unmarked bills.</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    var uri = encodeURI ( this.my_search_query_params + &#39;&amp;bmlt_settings_id=&#39; + this.my_settings_id + &#39;&amp;get_formats_only=1&#39; ).toString();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    uri =  this.my_ajax_base_uri + encodeURI ( &#39;switcher=GetSearchResults&amp;&#39; ) + uri;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    this.m_ajax_request = this.comms_AjaxRequest ( uri, this.comms_callback_loadloadFormatData, &#39;get&#39;, this );</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;};</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    \brief  Called to load a weekday.</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            This is called when the tab doesn&#39;t yet have a cache. It requests a JSON response</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            from the Root server for switcher=GetSearchResults.</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            This uses the filter established by the query parameters passed in on instantiation.</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            This function initiates an AJAX call that will return and call the class function</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            comms_callback_loadloadWeekdayData.</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    \param in_tab_object The tab DOM object.</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;TableSearchDisplay.prototype.comms_loadWeekdayData = function ( in_tab_object )</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;{</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    // We append the weekday, sort and sort order parameters to the URI.</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    var uri = encodeURI ( this.my_search_query_params + &#39;&amp;sort_keys=&#39; + this.my_selected_sort_key  + ((this.my_sort_dir == &#39;desc&#39;) ? &#39;,desc&#39; : &#39;&#39;) +&#39;&amp;bmlt_settings_id=&#39; + this.my_settings_id + &#39;&amp;weekdays[]=&#39; + (parseInt (in_tab_object.index) + 1).toString() ).toString();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    uri =  this.my_ajax_base_uri + encodeURI ( &#39;switcher=GetSearchResults&amp;&#39; ) + uri;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    this.m_ajax_request = this.comms_AjaxRequest ( uri, this.comms_callback_loadloadWeekdayData, &#39;get&#39;, in_tab_object );</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;};</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;/****************************************************************************************</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;*##################################### AJAX CALLBACKS ##################################*</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    \brief  Called when the format data is loaded.</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            This loads the function object with a cache of the retrieved JSON data. This</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            data is loaded once, then used to construct the format objects in the table.</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            This is called once, at the start. After the format data has been loaded, the</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            callback then initiates a new search for the current weekday.</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    \param in_response_object The HTTPRequest object for this AJAX call.</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    \param in_context_object The TableSearchDisplay object that initiated the call.</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;TableSearchDisplay.prototype.comms_callback_loadloadFormatData = function ( in_response_object, in_context_object )</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    for ( var i = 0; i &lt; 7; i++ )</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        var tab_object = in_context_object.my_weekday_links[i];</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        tab_object.className = &#39;bmlt_table_header_weekday_list_element&#39;;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        };</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    eval ( &quot;var format_data = &quot; + in_response_object.responseText + &quot;;&quot; );    // Extract the JSON object with the returned data.</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    in_context_object.my_format_data = format_data.formats;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    // Now that we have the formats, get the meeting list for today.</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    var d = new Date();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    in_context_object.my_header_container.selectTab ( d.getDay() );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;};</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    \brief  Called when the weekday data is loaded.</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            This loads the tab object with a cache of the retrieved JSON data, and has</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            the tab object select itself.</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    \param in_response_object The HTTPRequest object for this AJAX call.</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    \param in_tab_object The Tab object that denotes the chosen weekday.</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;TableSearchDisplay.prototype.comms_callback_loadloadWeekdayData = function ( in_response_object, in_tab_object )</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;{</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    eval ( &quot;var json_response = &quot; + in_response_object.responseText + &quot;;&quot; );    // Extract the JSON object with the returned data.</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    in_tab_object.weekday_json_data = json_response;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    in_tab_object.select();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;};</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;/****************************************************************************************</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;*#################################### UTILITY ROUTINES #################################*</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    \brief  This turns military time to ante meridian format or cleaned military time.</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            If the time is midnight or noon, the localized string for that is returned.</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    \param in_time_string A string with the time in military format.</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    \returns A string, with the properly formatted time (&quot;Noon&quot;, &quot;Midnight&quot;, &quot;HH:MM&quot; or &quot;HH:MM AM|PM&quot;).</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;TableSearchDisplay.prototype.utility_convertTime = function ( in_time_string )</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    var ret = in_time_string;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    var time_array = in_time_string.split ( &quot;:&quot; );</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    var hours = parseInt ( time_array[0] );</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    var minutes = parseInt ( time_array[1] );</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    // We use &quot;Noon&quot; and &quot;Midnight&quot; strings for those times.</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    // Kludge, to make &quot;Midnight&quot; late, as the computer wants it to be early.</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    // Anything over 23:54:59 is &quot;Midnight.&quot;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    if ( ((0 == hours) &amp;&amp; (0 == minutes)) || ((hours == 23) &amp;&amp; (minutes &gt;= 55)) )</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        ret = g_table_ampm_array[3];    // Midnight</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    else if ( (12 == hours) &amp;&amp; (0 == minutes) )</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        ret = g_table_ampm_array[2];    // Noon</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    else if ( !this.my_military_time )</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        var ampm = ( hours &gt;= 12 ) ? g_table_ampm_array[1] : g_table_ampm_array[0];</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        // Subtract 12 from afternoon.</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        if ( hours &gt; 12 )</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            hours -= 12;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            };</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        // Padding with a leading 0.</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        if ( minutes &lt; 10 )</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            minutes = &quot;0&quot; + minutes.toString();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            };</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        ret = hours.toString() + &#39;:&#39; + minutes + &#39; &#39; + ampm;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    else</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        // Padding with a leading 0.</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        if ( minutes &lt; 10 )</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            minutes = &quot;0&quot; + minutes.toString();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            };</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        ret = hours.toString() + &#39;:&#39; + minutes.toString();</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        };</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    return ret;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;};</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    \brief  This builds a readable aggregated street address from the components in the JSON.</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            Very simply, we just do the location name and street address.</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    \param in_json_data The JSON data for one meeting.</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    \returns a string, with the address HTML.</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;TableSearchDisplay.prototype.utility_createStreetAddress = function ( in_json_data )</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;{</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    var ret = &#39;&#39;;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    if ( in_json_data.location_text &amp;&amp; in_json_data.location_text.toString() )</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        ret = &#39;&lt;span class=&quot;bmlt_table_location_text_span&quot;&gt;&#39;;  // This allows folks to style the location name.</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        ret += in_json_data.location_text.toString();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        if ( (ret != &#39;&#39;) &amp;&amp; in_json_data.location_street &amp;&amp; in_json_data.location_street.toString() )</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            ret += &#39;&lt;span class=&quot;bmlt_table_location_text_comma_span&quot;&gt;, &lt;/span&gt;&#39;;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            };</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        ret += &#39;&lt;/span&gt;&#39;;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        };</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    if ( in_json_data.location_street &amp;&amp; in_json_data.location_street.toString() )</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        ret += &#39;&lt;span class=&quot;bmlt_table_location_street_span&quot;&gt;&#39;;  // This allows folks to style the street.</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        ret += in_json_data.location_street.toString();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        ret += &#39;&lt;/span&gt;&#39;;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        };</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    return ret;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;};</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    \brief  This builds an aggregated town from the components in the JSON.</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    \param in_json_data The JSON data for one meeting.</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    \returns a string, with the town HTML.</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;TableSearchDisplay.prototype.utility_createAddressTown = function ( in_json_data )</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    var hasTown = false;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    var ret = &#39;&lt;span class=&quot;bmlt_table_town_span&quot;&gt;&#39;;  // This allows folks to style the town.</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    // We prefer boroughs, as folks think of them as &quot;towns.&quot;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    if ( in_json_data.location_city_subsection &amp;&amp; in_json_data.location_city_subsection.toString() )</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        ret += in_json_data.location_city_subsection.toString();</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        hasTown = true;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    else</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        if ( in_json_data.location_municipality &amp;&amp; in_json_data.location_municipality.toString() )</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            ret += in_json_data.location_municipality.toString();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            hasTown = true;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            };</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        };</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    if ( hasTown &amp;&amp; in_json_data.location_province &amp;&amp; in_json_data.location_province.toString() )</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        ret += &#39;&lt;span class=&quot;bmlt_table_town_comma_span&quot;&gt;, &lt;/span&gt;&#39;;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        };</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    ret += &#39;&lt;/span&gt;&#39;;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    // Add the state.</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    if ( in_json_data.location_province &amp;&amp; in_json_data.location_province.toString() )</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        ret += &#39;&lt;span class=&quot;bmlt_table_state_span&quot;&gt;&#39;;  // This allows folks to style the state.            </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        ret += in_json_data.location_province.toString();</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        ret += &#39;&lt;/span&gt;&#39;;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        };</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    return ret;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;};</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;/****************************************************************************************</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;*#################################### THIRD-PARTY CODE #################################*</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;/**</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    \param in_pattern   The printf pattern to use</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    \param ... any variables needed to satisfy the pattern.</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;sprintf() for JavaScript 0.6</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;Copyright (c) Alexandru Marasteanu &lt;alexaholic [at) gmail (dot] com&gt;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;All rights reserved.</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;Redistribution and use in source and binary forms, with or without</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;modification, are permitted provided that the following conditions are met:</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    * Redistributions of source code must retain the above copyright</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      notice, this list of conditions and the following disclaimer.</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    * Redistributions in binary form must reproduce the above copyright</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      notice, this list of conditions and the following disclaimer in the</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      documentation and/or other materials provided with the distribution.</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    * Neither the name of sprintf() for JavaScript nor the</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      names of its contributors may be used to endorse or promote products</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      derived from this software without specific prior written permission.</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;DISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;Changelog:</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;2007.04.03 - 0.1:</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; - initial release</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;2007.09.11 - 0.2:</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; - feature: added argument swapping</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;2007.09.17 - 0.3:</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; - bug fix: no longer throws exception on empty paramenters (Hans Pufal)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;2007.10.21 - 0.4:</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; - unit test and patch (David Baird)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;2010.05.09 - 0.5:</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; - bug fix: 0 is now preceeded with a + sign</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; - bug fix: the sign was not at the right position on padded results (Kamal Abdali)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; - switched from GPL to BSD license</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;2010.05.22 - 0.6:</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; - reverted to 0.4 and fixed the bug regarding the sign of the number 0</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; Note:</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; Thanks to Raphael Pigulla &lt;raph (at] n3rd [dot) org&gt; (http://www.n3rd.org/)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; who warned me about a bug in 0.5, I discovered that the last update was</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; a regress. I appologize for that.</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;*/</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;TableSearchDisplay.prototype.utility_sprintf = function ()</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;{</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    function str_repeat (   i,</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                            m</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                        )</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        for (var o = []; m &gt; 0; o[--m] = i);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        return o.join(&#39;&#39;);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    };</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    var i = 0, a, f = arguments[i++], o = [], m, p, c, x, s = &#39;&#39;;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    while (f)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        if (m = /^[^\x25]+/.exec(f))</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            o.push(m[0]);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        else if (m = /^\x25{2}/.exec(f))</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            o.push(&#39;%&#39;);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        else if (m = /^\x25(?:(\d+)\$)?(\+)?(0|&#39;[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(f))</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            if (((a = arguments[m[1] || i++]) == null) || (a == undefined))</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                throw(&#39;Too few arguments.&#39;);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                };</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            if (/[^s]/.test(m[7]) &amp;&amp; (typeof(a) != &#39;number&#39;))</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                throw(&#39;Expecting number but found &#39; + typeof(a));</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                };</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            switch (m[7])</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                case &#39;b&#39;: a = a.toString(2); break;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                case &#39;c&#39;: a = String.fromCharCode(a); break;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                case &#39;d&#39;: a = parseInt(a,10); break;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                case &#39;e&#39;: a = m[6] ? a.toExponential(m[6]) : a.toExponential(); break;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                case &#39;f&#39;: a = m[6] ? parseFloat(a).toFixed(m[6]) : parseFloat(a); break;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                case &#39;o&#39;: a = a.toString(8); break;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                case &#39;s&#39;: a = ((a = String(a)) &amp;&amp; m[6] ? a.substring(0, m[6]) : a); break;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                case &#39;u&#39;: a = Math.abs(a); break;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                case &#39;x&#39;: a = a.toString(16); break;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                case &#39;X&#39;: a = a.toString(16).toUpperCase(); break;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                };</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            a = (/[def]/.test(m[7]) &amp;&amp; m[2] &amp;&amp; a &gt;= 0 ? &#39;+&#39; + a : a);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            c = m[3] ? m[3] == &#39;0&#39; ? &#39;0&#39; : m[3].charAt(1) : &#39; &#39;;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            x = m[5] - String(a).length - s.length;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            p = m[5] ? str_repeat(c, x) : &#39;&#39;;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            o.push(s + (m[4] ? a + p : p + a));</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        else</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            throw(&#39;Huh ?!&#39;);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            };</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        f = f.substring(m[0].length);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        };</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    return o.join(&#39;&#39;);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;};</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;/****************************************************************************************</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;*################################## DOM BUILDER ROUTINES ###############################*</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;*****************************************************************************************</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    These routines all construct the DOM tree for the shortcode. The weekday header is</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    displayed all the time (with the selected tab changing), but the table data (and the</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    header) is reconstructed from scratch each time.</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;*************************************************************************************//**</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    \brief Creates the weekday selection header.</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;TableSearchDisplay.prototype.domBuilder_CreateHeader = function ()</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    this.my_weekday_links = new Array();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    this.my_header_container = document.createElement ( &#39;ul&#39; );   // Create the header container.</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    this.my_header_container.handler = this;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    this.my_header_container.className = &#39;bmlt_table_header_weekday_list&#39;;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    this.my_container_object.appendChild ( this.my_header_container );</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    var startingIndex = this.my_start_weekday;  // Allows us to start from different weekdays.</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    // Build the list of weekday tab objects.</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    for ( var i = 0; i &lt; 7; i++ )</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        this.my_weekday_links[i] = this.domBuilder_CreateOneWeekday ( startingIndex++ );</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        if ( startingIndex == 7 )</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            startingIndex = 0;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            };</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        this.my_header_container.appendChild ( this.my_weekday_links[i] );</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        };</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    // This inline function tells the header to select the indexed (0-based) tab.</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    this.my_header_container.selectTab = function ( in_weekday  ///&lt; The day of the week (0 is Sunday, 6 is Saturday)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                                                    )</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        for ( var i = 0; i &lt; 7; i++ )</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            if ( this.handler &amp;&amp; this.handler.my_weekday_links &amp;&amp; this.handler.my_weekday_links[i] )</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                // If this is the day we are looking at, we select it.</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                if ( this.handler.my_weekday_links[i].index == in_weekday )</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                    {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    this.handler.my_weekday_links[i].select();</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    };</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                };</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            };</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        };</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    this.comms_loadFormatData();</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;};</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    \brief Creates one weekday button for the header.</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    \param in_weekday_index The index of the weekday to be created. 0 is Sunday, 6 is Saturday.</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;TableSearchDisplay.prototype.domBuilder_CreateOneWeekday = function ( in_weekday_index )</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;{</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    // First set up the weekday tab element. It will anchor the context for the data.</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    var weekdayElement = document.createElement ( &#39;li&#39; );        // Create the basic list element.</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    weekdayElement.handler = this;  // We will do this a lot. It allows anyone to grab the object context from the element.</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    weekdayElement.index = in_weekday_index;    // This is the 0-based weekday index.</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    weekdayElement.rest_className = &#39;bmlt_table_header_weekday_list_element&#39;;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    weekdayElement.className = weekdayElement.rest_className;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    // Today is a great day!</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    var d = new Date();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    if ( d.getDay() == in_weekday_index )</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        weekdayElement.rest_className += &#39; is_today&#39;;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        };</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    // If we click, we select.</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    weekdayElement.onclick = function () {this.select()};</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    // This inline function will force a reload of the search for the given weekday.</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    weekdayElement.reload = function()</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        if ( this.className != (this.rest_className + &#39; is_loading&#39;) )</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            if ( this.handler.my_body_container )   // Clear any preexisting condition.</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                this.handler.my_body_container.parentNode.removeChild ( this.handler.my_body_container );</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                this.handler.my_body_container.innerHTML = &#39;&#39;;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                this.handler.my_body_container = null;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                };</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            this.weekday_json_data = null;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            this.className = this.rest_className + &#39; is_loading&#39;;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            // Set a title, saying what is happening.</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            this.setAttribute ( &#39;title&#39;, this.handler.utility_sprintf ( g_table_header_tab_loading_format, g_table_weekday_long_name_array[this.index] ) );</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            this.handler.comms_loadWeekdayData ( this );</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            };</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        };</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    // This inline function will read the data from the server if it is not already cached.</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    // If the tab has cached data, then it deselects all the other tabs, selects itself, and populates the main area with the data in its cache.</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    weekdayElement.select = function()</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        if ( !this.weekday_json_data )</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            this.reload();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        else</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            if ( this.handler.my_body_container )   // Clear any preexisting condition.</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                this.handler.my_body_container.parentNode.removeChild ( this.handler.my_body_container );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                this.handler.my_body_container.innerHTML = &#39;&#39;;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                this.handler.my_body_container = null;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                };</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            for ( var i = 0; i &lt; 7; i++ )</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                if ( this.handler &amp;&amp; this.handler.my_weekday_links &amp;&amp; this.handler.my_weekday_links[i] )</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                    {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                    var tabObject = this.handler.my_weekday_links[i];</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                    // If the indexed object is not ours, then we deselect it.</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                    if ( tabObject.index != this.index )</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                        {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                        // This is not selected or loading.</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                        tabObject.className = tabObject.rest_className;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                        // Set a title, saying what will happen when this is clicked.</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                        tabObject.setAttribute ( &#39;title&#39;, this.handler.utility_sprintf ( g_table_header_tab_format, g_table_weekday_long_name_array[tabObject.index] ) );</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                        };</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                    };</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                };</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            this.handler.my_selected_tab = this;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            this.sort_key = this.handler.my_selected_sort_key;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            this.sort_dir = this.handler.my_sort_dir;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            this.handler.domBuilder_PopulateWeekday ( this.weekday_json_data, this.index, this.sort_key, this.sort_dir, this );</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            };</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        };</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    // This will be the span element that holds the weekday name.</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    var textNode = document.createElement ( &#39;span&#39; );</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    textNode.appendChild ( document.createTextNode ( g_table_weekday_name_array[in_weekday_index] ) );</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    textNode.rest_className = &#39;bmlt_table_weekday_span&#39;;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    textNode.className = textNode.rest_className;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    // We add these functions to handle changing the class when the cursor moves over the tab.</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    textNode.onmouseover = function ()</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        if ( this.parentNode.className != (this.parentNode.rest_className + &#39; is_loading&#39;) )</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            if ( this.parentNode.handler.my_selected_tab != this.parentNode )</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                this.parentNode.className = this.parentNode.rest_className + &#39; bmlt_table_mouseover&#39;;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                };</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            };</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        };</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    // We restore the class when we mouse out. However, we ignore it if we are loading.</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    textNode.onmouseout = function ()</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        if ( !this.parentNode.className.match (/is_loading/) )</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            this.parentNode.className = this.parentNode.rest_className;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            if ( this.parentNode.handler.my_selected_tab == this.parentNode )</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                this.parentNode.className += &#39; is_selected&#39;;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                };</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            };</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        };</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    weekdayElement.appendChild ( textNode );</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    // This is the throbber image. It will be hidden unless the weekday is loading.</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    var throbberImage = document.createElement ( &#39;img&#39; );</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    // We replace the &quot;default&quot; with our theme.</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    var regex = /themes\x2Fdefault\x2F/;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    throbberImage.src = g_table_throbber_img_src.replace ( regex, &#39;themes/&#39; + this.my_theme_name.toString() + &#39;/&#39; );</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    throbberImage.className = &#39;bmlt_table_throbber_image&#39;;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    weekdayElement.appendChild ( throbberImage );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    return weekdayElement;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;};</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    \brief Populates the meeting result table for the given data.</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    \param in_search_results_json A JSON object with the meeting search results.</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    \param in_index The 0-based weekday index.</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    \param in_sort_key The sort key, for the data sort.</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    \param in_sort_dir The sort direction, for the data sort. It will be &#39;asc&#39; or &#39;desc&#39;.</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    \param in_tabObject The tab object, which will be set to selected when the weekday is done.</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;TableSearchDisplay.prototype.domBuilder_PopulateWeekday = function ( in_search_results_json, in_index, in_sort_key, in_sort_dir, in_tabObject )</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;{</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    if ( null != this.my_body_container )   // Clear any preexisting condition.</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        this.my_body_container.parentNode.removeChild ( this.my_body_container );</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        this.my_body_container.innerHTML = &#39;&#39;;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        this.my_body_container = null;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        };</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    this.my_body_container = document.createElement ( &#39;div&#39; );        // Create the main display container element.</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    this.my_body_container.rest_className = &#39;bmlt_table_div&#39;;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    this.my_body_container.rest_className += (&#39; bmlt_table_&#39; + ((in_sort_dir == &#39;asc&#39;) ? &#39;sort_asc&#39; : &#39;sort_desc&#39;) + &#39;_div&#39;);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    this.my_body_container.rest_className += (&#39; bmlt_table_sort_&#39; + in_sort_key.replace ( /,/g, &#39;_&#39; ) + &#39;_div&#39;);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    this.my_body_container.className = this.my_body_container.rest_className;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    this.my_body_container_header = null;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    this.my_body_container_body = null;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    // Attach all the various DOM elements.</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    this.my_container_object.appendChild ( this.my_body_container );        </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    this.my_body_container.appendChild ( this.domBuilder_PopulateWeekdayHeader ( in_index, in_sort_key, in_sort_dir ) );</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    this.my_body_container.appendChild ( this.domBuilder_PopulateWeekdayBody ( in_search_results_json ) );</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    var div = document.createElement ( &#39;div&#39; );</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    div.className = &#39;bmlt_breaker_div&#39;;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    this.my_body_container.appendChild ( div );</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    in_tabObject.className = in_tabObject.rest_className + &#39; is_selected&#39;;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;};</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    \brief Populates the header for the meetings table.</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    \param in_index The 0-based weekday index.</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    \param in_sort_key The sort key, for the data sort.</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    \param in_sort_dir The sort direction, for the data sort. It will be &#39;asc&#39; or &#39;desc&#39;.</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;TableSearchDisplay.prototype.domBuilder_PopulateWeekdayHeader = function ( in_index, in_sort_key, in_sort_dir )</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;{</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    if ( null != this.my_body_container_header )   // Clear any preexisting condition.</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        this.my_body_container_header.parentNode.removeChild ( this.my_body_container_header );</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        this.my_body_container_header.innerHTML = &#39;&#39;;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        this.my_body_container_header = null;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        };</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    this.my_body_container_header = document.createElement ( &#39;ul&#39; );        // Create the header element.</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    this.my_body_container_header.className = &#39;bmlt_table_header_ul&#39;;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    var theElement = this.domBuilder_PopulateWeekdayHeaderColumn ( g_table_time_header_text, this.my_sort_key_time, ((in_sort_key == this.my_sort_key_time) ? in_sort_dir : &#39;asc&#39;), in_sort_key == this.my_sort_key_time );</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    theElement.className = &#39;bmlt_table_header_li bmlt_table_header_li_time&#39;;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    this.my_body_container_header.appendChild ( theElement );</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    theElement = this.domBuilder_PopulateWeekdayHeaderColumn ( g_table_town_header_text, this.my_sort_key_town, ((in_sort_key == this.my_sort_key_town) ? in_sort_dir : &#39;asc&#39;), in_sort_key == this.my_sort_key_town );</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    theElement.className = &#39;bmlt_table_header_li bmlt_table_header_li_town&#39;;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    this.my_body_container_header.appendChild ( theElement );</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    theElement = this.domBuilder_PopulateWeekdayHeaderColumn ( g_table_name_header_text, this.my_sort_key_meeting_name, ((in_sort_key == this.my_sort_key_meeting_name) ? in_sort_dir : &#39;asc&#39;), in_sort_key == this.my_sort_key_meeting_name );</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    theElement.className = &#39;bmlt_table_header_li bmlt_table_header_li_name&#39;;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    this.my_body_container_header.appendChild ( theElement );</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    theElement = this.domBuilder_PopulateWeekdayHeaderColumn ( g_table_address_header_text, this.my_sort_key_address, ((in_sort_key == this.my_sort_key_address) ? in_sort_dir : &#39;asc&#39;), in_sort_key == this.my_sort_key_address );</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    theElement.className = &#39;bmlt_table_header_li bmlt_table_header_li_address&#39;;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    this.my_body_container_header.appendChild ( theElement );</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    theElement = this.domBuilder_PopulateWeekdayHeaderColumn ( g_table_format_header_text, null, null, false );</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    theElement.className = &#39;bmlt_table_header_li bmlt_table_header_li_format&#39;;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    this.my_body_container_header.appendChild ( theElement );</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    return this.my_body_container_header;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;};</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    \brief Populates the header for the meetings table.</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    \param in_name The text name for the column.</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    \param in_sort_key The sort key, for the data sort.</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    \param in_sort_dir The sort direction, for the data sort. It will be &#39;asc&#39; or &#39;desc&#39;.</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    \param in_is_selected A boolean value. True, if this is the sort key.</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;TableSearchDisplay.prototype.domBuilder_PopulateWeekdayHeaderColumn = function ( in_name, in_sort_key, in_sort_dir, in_is_selected )</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;{</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    var theElement =  document.createElement ( &#39;li&#39; );       // Create the column element</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    theElement.key = in_sort_key;                            // This will be the sort key for this column.</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    var textNode = document.createElement ( &#39;span&#39; );</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    textNode.appendChild ( document.createTextNode ( in_name ) );</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    textNode.is_selected = false;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    textNode.rest_className = &#39;bmlt_table_header_span&#39;;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    textNode.className = textNode.rest_className;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    textNode.sort_dir = in_sort_dir;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    textNode.sort_key = in_sort_key;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    textNode.handler = this;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    if ( in_sort_key )</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        if ( in_is_selected )</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            textNode.rest_className = &#39;bmlt_table_header bmlt_table_header_selected&#39; + &#39; bmlt_table_header_selected_sort_direction_&#39; + ((in_sort_dir == &#39;asc&#39;) ? &#39;asc&#39; : &#39;desc&#39;);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            textNode.className = textNode.rest_className;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            textNode.is_selected = true;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            };</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        textNode.onmouseover = function ()</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            this.className = this.rest_className + &#39; bmlt_table_mouseover&#39;;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            };</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        textNode.onmouseout = function ()</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            this.className = this.rest_className;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            };</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        textNode.onclick = function()</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            if ( this.handler.my_selected_sort_key == this.sort_key )</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                this.sort_dir = ((this.sort_dir == &#39;asc&#39;) ? &#39;desc&#39; : &#39;asc&#39;);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                };</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            this.handler.my_selected_sort_key = this.sort_key;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            this.handler.my_sort_dir = this.sort_dir;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            for ( var i = 0; i &lt; 7; i++ )</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                this.handler.my_weekday_links[i].weekday_json_data = null;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                };</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            this.handler.my_selected_tab.reload();</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            };</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    else</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        textNode.rest_className = &#39;bmlt_header_formats_span&#39;;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        textNode.className = textNode.rest_className;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        };</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    theElement.appendChild ( textNode );</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    return theElement;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;};</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    \brief Populates the main table for the meetings table.</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    \param in_json_data The JSON data for all the meetings.</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;TableSearchDisplay.prototype.domBuilder_PopulateWeekdayBody = function ( in_json_data )</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;{</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    if ( null != this.my_body_container_body )   // Clear any preexisting condition.</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        this.my_body_container_body.parentNode.removeChild ( this.my_body_container_body );</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        this.my_body_container_body.innerHTML = &#39;&#39;;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        this.my_body_container_body = null;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        };</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    this.my_body_container_body = document.createElement ( &#39;ul&#39; );</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    this.my_body_container_body.className = &#39;bmlt_table_data_ul&#39;;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    if ( in_json_data.length )</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        for ( var i = 0; i &lt; in_json_data.length; i++ )</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            var listElement = document.createElement ( &#39;li&#39; );</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            listElement.className = &#39;bmlt_table_data_ul_li&#39;;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            listElement.className += (&#39; bmlt_row&#39; + ((i % 2) ? &#39;_odd&#39; : &#39;_even&#39;));</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            var meeting_json = in_json_data[i];</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            var meeting_object = this.domBuilder_PopulateWeekdayBody_one_meeting ( meeting_json );</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            listElement.appendChild ( meeting_object );</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            this.my_body_container_body.appendChild ( listElement );</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            };</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    else</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        var listElement = document.createElement ( &#39;li&#39; );</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        listElement.className = &#39;bmlt_table_data_ul_no_meetings_li&#39;;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        listElement.innerHTML = &#39;&lt;span class=&quot;bmlt_table_no_meetings_span&quot;&gt;&#39; + this.utility_sprintf ( g_table_no_meetings_format, g_table_weekday_long_name_array[this.my_selected_tab.index] ) + &#39;&lt;/span&gt;&#39;;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        this.my_body_container_body.appendChild ( listElement );</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        };</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    return this.my_body_container_body;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;};</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    \brief  Populates one row (meeting)</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    \param in_json_data The JSON data for the meeting.</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;TableSearchDisplay.prototype.domBuilder_PopulateWeekdayBody_one_meeting = function ( in_json_data )</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;{</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    var rowElement = document.createElement ( &#39;ul&#39; );</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    rowElement.className = &#39;bmlt_table_data_ul_li_ul&#39;;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    var comments = null;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    if ( in_json_data.comments )</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        comments = in_json_data.comments;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        };</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    if ( in_json_data.location_info )</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        location_info = in_json_data.location_info;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        };</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    var latitude = in_json_data.latitude;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    var longitude = in_json_data.longitude;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    var time_column = this.domBuilder_PopulateWeekdayBody_one_column ( &#39;time&#39;, this.utility_convertTime ( in_json_data.start_time.toString() ), 0, 0 );</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    var town_column = this.domBuilder_PopulateWeekdayBody_one_column ( &#39;town&#39;, this.utility_createAddressTown ( in_json_data ), 0, 0 );</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    var name_column = this.domBuilder_PopulateWeekdayBody_one_column ( &#39;name&#39;, in_json_data.meeting_name.toString(), 0, 0 );</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    var address_column = this.domBuilder_PopulateWeekdayBody_one_column ( &#39;address&#39;, this.utility_createStreetAddress ( in_json_data ), latitude, longitude );</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    var format_column = this.domBuilder_PopulateWeekdayBody_one_column ( &#39;formats&#39;, in_json_data.formats.toString(), 0, 0 );</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    rowElement.appendChild ( time_column );</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    rowElement.appendChild ( town_column );</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    rowElement.appendChild ( name_column );</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    rowElement.appendChild ( address_column );</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    rowElement.appendChild ( format_column );</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    if ( in_json_data.comments )</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        {</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        var comments_column = this.domBuilder_PopulateWeekdayBody_one_column ( &#39;comments&#39;, in_json_data.comments.toString(), 0, 0 );</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        rowElement.appendChild ( comments_column );</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        };</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    if ( in_json_data.location_info )</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        var location_info_column = this.domBuilder_PopulateWeekdayBody_one_column ( &#39;location_info&#39;, in_json_data.location_info.toString(), 0, 0 );</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        rowElement.appendChild ( location_info_column );</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        };</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    var div = document.createElement ( &#39;div&#39; );</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    div.className = &#39;bmlt_breaker_div&#39;;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    rowElement.appendChild ( div );</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    return rowElement;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;};</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    \brief Populates one column of a meeting row.</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    \param in_tag The tag used as a key for this column</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    \param in_string The name of the column (displayed as a string)</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    \param in_latitude if supplied, the longitude of a meeting (is usually null)</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    \param in_longitude if supplied, the latitude of a meeting (is usually null)</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;TableSearchDisplay.prototype.domBuilder_PopulateWeekdayBody_one_column = function ( in_tag, in_string, in_latitude, in_longitude )</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;{</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    var columnElement = document.createElement ( &#39;li&#39; );</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    columnElement.className = &#39;bmlt_table_data_ul_li_ul_li bmlt_table_data_ul_li_ul_li_&#39; + in_tag;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    if ( in_tag == &#39;formats&#39; )</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        var formats_div = this.domBuilder_createFormats ( in_string );</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        if ( formats_div )</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            {</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            columnElement.appendChild ( formats_div );</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            };</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    else if ( in_latitude &amp;&amp; in_longitude )</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        var textNode = document.createElement ( &#39;span&#39; );</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        textNode.className = &#39;bmlt_table_data_ul_li_ul_li_span bmlt_table_data_ul_li_ul_li_span_&#39; + in_tag;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        var anchorNode = document.createElement ( &#39;a&#39; );</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        textNode.className = &#39;bmlt_table_data_ul_li_ul_li_span_a bmlt_table_data_ul_li_ul_li_span_a_&#39; + in_tag;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        anchorNode.href= this.utility_sprintf ( g_table_map_link_uri_format, parseFloat ( in_latitude ), parseFloat ( in_longitude ) );</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        anchorNode.innerHTML = in_string;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        textNode.appendChild ( anchorNode );</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        columnElement.appendChild ( textNode );</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    else</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        var textNode = document.createElement ( &#39;span&#39; );</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        textNode.className = &#39;bmlt_table_data_ul_li_ul_li_span bmlt_table_data_ul_li_ul_li_span_&#39; + in_tag;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        textNode.innerHTML = in_string ? in_string : &#39;&amp;nbsp;&#39;;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        columnElement.appendChild ( textNode );</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        };</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    return columnElement;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;};</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    \brief  This builds a div element for the given formats. The div is filled with spans; one for each format.</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    \param in_formats_string The JSON data for one meeting.</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;TableSearchDisplay.prototype.domBuilder_createFormats = function ( in_formats_string )</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;{</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    var ret = document.createElement ( &#39;div&#39; );</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    ret.className = &#39;bmlt_formats_div&#39;;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    var formatsArray = in_formats_string.split ( &#39;,&#39; );</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    for ( var i = 0; i &lt; formatsArray.length; i++ )</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        var format_string = formatsArray[i].toString();</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        var span = this.domBuilder_createOneFormatSpan ( format_string );</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        if ( span )</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            ret.appendChild ( span );</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            };</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        };</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    if ( ret.childNodes.length == 0 )</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        ret = null;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    else</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        var div = document.createElement ( &#39;div&#39; );</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        div.className = &#39;bmlt_breaker_div&#39;;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        ret.appendChild ( div );</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        };</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    return ret;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;};</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;/************************************************************************************//**</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    \brief  This builds a span element for the given format.</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    \param in_format_string format key.</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    \returns the instantiated DOM object.</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;****************************************************************************************/</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;TableSearchDisplay.prototype.domBuilder_createOneFormatSpan = function ( in_format_string )</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;{</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    if ( in_format_string )</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        var ret = document.createElement ( &#39;span&#39; );</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        ret.rest_className = &#39;bmlt_format_span bmlt_format_span_&#39; + in_format_string;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        ret.className = ret.rest_className;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        ret.appendChild ( document.createTextNode ( in_format_string ) );</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        for ( var i = 0; i &lt; this.my_format_data.length; i++ )</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            var format_object = this.my_format_data[i];</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            if ( format_object.key_string == in_format_string )</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                var title_string = format_object.name_string;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                ret.setAttribute ( &#39;title&#39;, title_string );</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                var description_string = format_object.description_string;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                ret.onclick = function()</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                    {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                    alert ( description_string );</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                    };</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                ret.onmouseover = function ()</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                    {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                    this.className = this.rest_className + &#39; bmlt_table_mouseover&#39;;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                    };</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                ret.onmouseout = function ()</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                    {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                    this.className = this.rest_className;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                    };</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                };</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            };</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        return ret;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        };</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    return null;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
